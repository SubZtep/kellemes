experimental_monorepo_root = true

[env]
NODE_ENV = "development"

OLLAMA_BASE_URL = "https://ollama.kellemes.net"
# OLLAMA_DEFAULT_MODEL = "smollm2:1.7b"
OLLAMA_DEFAULT_MODEL = "smollm2:135m"

OLLAMA_MODEL = "kellemes"
EMBEDDING_MODEL = "nomic-embed-text"
EMBEDDING_DIMENSION = "768"
TOP_K_RESULTS = "3"
SIMILARITY_THRESHOLD = "0.7"
DATA_DIR = "{{cwd}}/data"

API_BASE_URL = "http://localhost:8080"
API_PORT = "8080"

POSTGRES_HOST = "localhost"
POSTGRES_PORT = "5432"
POSTGRES_DB = "kellemes"
POSTGRES_USER = "kellemes"
POSTGRES_PASSWORD = { value = "kellemes_password", redact = true }

BETTER_AUTH_SECRET = "2R5VZmqXbcIsO0Jw6eiIeRaBpz7XZ9pL"
BETTER_AUTH_URL = "http://localhost:8080"

_.file = ".env"
_.path = ['{{config_root}}/node_modules/.bin']

[tools]
biome = "2.3.7"
bun = "1.3.0"
node = "24.11.1"
pnpm = "10.23.0"
python = "3.14.2"

[hooks]
postinstall = "npx corepack enable"
enter = "echo 'keLLeMes is waiting for ðŸ«µ you!'"
leave = "echo 'Here comes the door. ðŸšª'"

[settings]
lockfile = true
experimental = true
task.monorepo_depth = 2

[tasks.pnpm-install]
description = "Installs dependencies with pnpm"
run = "pnpm install"
sources = ["package.json", "pnpm-lock.yaml", "mise.toml"]
outputs = ["node_modules/.pnpm/lock.yaml"]

[tasks.build]
description = "Builds project packages"
run = "pnpm run build"
depends = ["pnpm-install"]
